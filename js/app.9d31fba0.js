(function(e){function t(t){for(var a,o,i=t[0],c=t[1],u=t[2],h=0,m=[];h<i.length;h++)o=i[h],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&m.push(s[o][0]),s[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(m.length)m.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},s={app:0},r=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/albums-by-year/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1002:function(e,t,n){"use strict";var a=n("913e"),s=n.n(a);s.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{app:!0,desktop:e.desktop}},[n("div",{staticClass:"header"},[e._v(" Albums By Year "),n("font-awesome-icon",{staticClass:"theme-icon",attrs:{icon:e.theme.icon},on:{click:e.changeTheme}})],1),n("main",[e.authorised?n("Library",{attrs:{access_token:e.access_token}}):n("div",{staticClass:"login"},[n("h1",{staticClass:"title"},[e._v("Albums By Year")]),n("p",{staticClass:"preface"},[e._v("See your saved albums on spotify, categorised by year!")]),n("a",{staticClass:"auth",attrs:{href:e.authoriseURL,target:"_self"}},[e._v("LOG IN WITH SPOTIFY")])])],1),n("footer",[n("ul",[n("li",[n("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fab","github"]}}),n("a",{attrs:{href:"https://github.com/TheTeaCat/albums-by-year/"}},[e._v("GitHub")])],1),e._m(0)])])])},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[e._v("Made by "),n("a",{attrs:{href:"http://joshuarainbow.co.uk/"}},[e._v("Josh")])])}],o=(n("4160"),n("c975"),n("a15b"),n("d81d"),n("b0c0"),n("ac1f"),n("5319"),n("1276"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"library"},[e.loaded?n("div",[n("h1",{staticClass:"library-header"},[n("a",{staticClass:"username",attrs:{href:e.profile.external_urls.spotify}},[e._v(e._s(e.profile.display_name))]),e._v(e._s("s"==e.profile.display_name[e.profile.display_name.length-1]?"'":"'s")+" saved albums, by year"),n("span",[e._v("!")])]),n("ToggleGroup",{attrs:{options:e.album_types,title:"Release Types"}}),n("div",{staticClass:"searchbox-cont"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchBoxContent,expression:"searchBoxContent"}],class:{searchbox:!0,populated:""!=e.searchBoxContent},attrs:{placeholder:"Search..."},domProps:{value:e.searchBoxContent},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateSearchQuery(t)},e.searchQueryChange],input:function(t){t.target.composing||(e.searchBoxContent=t.target.value)}}}),e.searchBoxContent!=e.search_query||""==e.searchBoxContent?n("font-awesome-icon",{staticClass:"icon fa-fw",attrs:{icon:"search"},on:{click:e.updateSearchQuery}}):n("font-awesome-icon",{staticClass:"icon fa-fw",attrs:{icon:"times"},on:{click:e.clearSearchQuery}})],1),n("ol",e._l(e.sortedAlbumYears,(function(t){return n("Year",{key:t,attrs:{year:t,albums:e.albumsByYear[t].albums,album_types:e.album_types,search_query:e.search_query,access_token:e.access_token},on:{filtered:function(n){e.albumsByYear[t].empty=0==n,e.checkAlbumsShown()}}})})),1),n("h2",{directives:[{name:"show",rawName:"v-show",value:0==e.loadedAlbums.length,expression:"loadedAlbums.length == 0"}],staticClass:"empty-notice"},[e._v("You haven't got any saved albums!")]),n("h2",{directives:[{name:"show",rawName:"v-show",value:e.no_albums_shown,expression:"no_albums_shown"}],staticClass:"empty-notice"},[e._v("None of your albums match these filters!")])],1):n("div",{staticClass:"loading"},[n("h1",{staticClass:"loading-title"},[e._v("Loading")]),n("p",{staticClass:"album-count"},[e._v(e._s(e.loadedAlbums)+" albums")])])])}),i=[],c=(n("a623"),n("b64b"),n("498a"),n("b85c")),u=(n("96cf"),n("1da1")),l=n("bc3a"),h=n.n(l),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",e._l(Object.keys(e.options),(function(t){return n("li",{key:t},[n("Toggle",{staticClass:"toggle",attrs:{value:e.options[t].show},on:{change:function(n){e.options[t].show=!e.options[t].show}}}),e._v(" "+e._s(e.options[t].display)+" ")],1)})),0)},f=[],p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"switch"},[n("input",{attrs:{type:"checkbox"},domProps:{checked:e.value},on:{click:function(t){return e.$emit("change")}}}),n("span",{staticClass:"slider"})])},d=[],b={props:["value"]},v=b,y=(n("f634"),n("2877")),_=Object(y["a"])(v,p,d,!1,null,"d3287296",null),g=_.exports,w={components:{Toggle:g},props:["title","options"]},k=w,x=(n("5748"),Object(y["a"])(k,m,f,!1,null,"62e1868c",null)),C=x.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{directives:[{name:"show",rawName:"v-show",value:e.visibleAlbums>0,expression:"visibleAlbums > 0"}],staticClass:"year"},[n("h2",{staticClass:"year-header",on:{click:function(t){e.expanded=!e.expanded}}},[n("font-awesome-icon",{class:{icon:!0,expanded:e.expanded},attrs:{icon:e.expanded?"minus":"plus"}}),e._v(" "+e._s(e.year)+" "),n("span",[e._v("("+e._s(e.visibleAlbums)+")")])],1),n("ol",{directives:[{name:"show",rawName:"v-show",value:e.expanded,expression:"expanded"}],staticClass:"albums-list"},e._l(e.sortedAlbums,(function(t){return n("Album",{directives:[{name:"show",rawName:"v-show",value:e.albumShown(t),expression:"albumShown(a)"}],key:t.album.id,attrs:{album:t}})})),1)])},j=[],A=(n("4de4"),n("caad"),n("fb6a"),n("45fc"),n("2532"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"album"},[e.albumCover?n("img",{attrs:{src:e.albumCover}}):e._e(),n("div",{staticClass:"album-title"},[n("a",{attrs:{href:e.album.album.external_urls.spotify}},[e._v(e._s(e.album.album.name))])]),n("ul",{staticClass:"artists-list"},e._l(e.album.album.artists,(function(t){return n("li",{key:t.id},[n("a",{attrs:{href:t.external_urls.spotify}},[e._v(e._s(t.name))])])})),0),n("div",{staticClass:"album-release-date"},[e._v(e._s(e.album.album.release_date.replace(/-/g,"/")))])])}),B=[],S={props:["access_token","album"],data:function(){return{albumCover:null}},mounted:function(){this.album.album.images.sort((function(e,t){return t.width*t.height-e.width*e.height}))[0],this.albumCover=this.album.album.images[0].url}},T=S,$=(n("7438"),Object(y["a"])(T,A,B,!1,null,"28c618f5",null)),Y=$.exports,q={components:{Album:Y},props:["access_token","year","albums","album_types","search_query"],data:function(){return{expanded:!1}},computed:{sortedAlbums:function(){return this.albums.slice().sort((function(e,t){var n=e.album.release_date,a=t.album.release_date;return n>a?-1:n<a?1:0}))},visibleAlbums:function(){var e=this,t=this.albums.filter((function(t){return e.albumShown(t)})).length;return this.$emit("filtered",t),t}},methods:{albumShown:function(e){var t=this;return this.album_types[e.album.album_type].show&&(""==this.search_query||e.album.name.toLowerCase().includes(this.search_query.toLowerCase())||e.album.artists.map((function(e){return e.name.toLowerCase().includes(t.search_query.toLowerCase())})).some((function(e){return e})))}}},N=q,E=(n("1002"),Object(y["a"])(N,O,j,!1,null,"c70ef4fc",null)),L=E.exports,P={components:{ToggleGroup:C,Year:L},props:["access_token"],data:function(){return{albumsByYear:null,profile:null,album_types:{album:{show:!0,display:"Albums"},single:{show:!1,display:"Singles"},compilation:{show:!1,display:"Compilations"}},loadedAlbums:0,search_query:"",searchBoxContent:"",no_albums_shown:!1}},computed:{albums_request_url:function(){return"https://api.spotify.com/v1/me/albums?access_token="+this.access_token+"&limit=50&offset=0"},profile_request_url:function(){return"https://api.spotify.com/v1/me/?access_token="+this.access_token},sortedAlbumYears:function(){return Object.keys(this.albumsByYear).sort((function(e,t){return t-e}))},loaded:function(){return this.albumsByYear&&this.profile}},methods:{updateSearchQuery:function(){this.search_query=this.searchBoxContent.trim()},searchQueryChange:function(e){var t=this,n=e.target.value;setTimeout((function(){n==t.searchBoxContent&&t.updateSearchQuery(e)}),1e3)},clearSearchQuery:function(){this.searchBoxContent="",this.search_query=""},checkAlbumsShown:function(){var e=this;this.no_albums_shown=Object.keys(this.albumsByYear).map((function(t){return e.albumsByYear[t].empty})).every((function(e){return e}))}},mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h.a.get(t).then(function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var s,r,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.loadedAlbums+=t.data.items.length,!t.data.next){e.next=4;break}return e.next=4,n(t.data.next+"&access_token="+this.access_token,a);case 4:t=t.data.items,s=Object(c["a"])(t);try{for(s.s();!(r=s.n()).done;)o=r.value,i=o["album"]["release_date"].split("-")[0],!a[i]&&(a[i]={year:i,albums:[]}),a[i]["albums"].push(o)}catch(u){s.e(u)}finally{s.f()}case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}().bind(this));case 2:return e.abrupt("return",a);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}().bind(e),t.next=3,n(e.albums_request_url,{});case 3:e.albumsByYear=t.sent,h.a.get(e.profile_request_url).then(function(e){this.profile=e.data}.bind(e));case 5:case"end":return t.stop()}}),t)})))()}},R=P,Q=(n("96a0"),Object(y["a"])(R,o,i,!1,null,"37af4c27",null)),M=Q.exports,G={components:{Library:M},data:function(){return{scopes:["user-library-read"],client_id:"8c00d93547824017b1854018ed35bdef",access_token:null,theme:{icon:"fill-drip",name:"system"}}},computed:{authorised:function(){return!!this.access_token},authoriseURL:function(){return"https://accounts.spotify.com/authorize?client_id="+this.client_id+"&response_type=token&redirect_uri="+location.protocol+"//"+location.host+location.pathname+"&scope="+this.scopes.join("%20")},desktop:function(){return!/Mobi/i.test(window.navigator.userAgent)}},methods:{changeTheme:function(e){var t=["system","dark","pink"],n={system:"fill-drip",dark:"moon",pink:"ice-cream"};console.log(e),t.indexOf(e)>0?this.theme.name=e:this.theme.name=t[(t.indexOf(this.theme.name)+1)%t.length],this.theme.icon=n[this.theme.name],document.getElementsByTagName("html")[0].setAttribute("theme",this.theme.name),this.$cookies.set("theme",this.theme.name)}},mounted:function(){var e={};this.$route.hash.split("&").map((function(e){return e.replace("#","")})).forEach((function(t){var n=t.split("=");e[n[0]]=n[1]})),this.access_token=e["access_token"],this.authorised&&this.$router.push(this.$route.path),this.$cookies.isKey("theme")&&this.changeTheme(this.$cookies.get("theme"))}},F=G,I=(n("5c0b"),Object(y["a"])(F,s,r,!1,null,null,null)),J=I.exports,H=n("8c4f"),U=n("a7fe"),z=n.n(U),K=n("2b27"),W=n.n(K),D=n("ecee"),V=n("ad3d"),X=n("f2d1"),Z=n("c074");D["c"].add(X["a"]),D["c"].add(Z["e"],Z["c"],Z["f"],Z["g"],Z["a"],Z["b"],Z["d"]),a["a"].component("font-awesome-icon",V["a"]);var ee=n("9483");Object(ee["a"])("".concat("/albums-by-year/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),a["a"].use(H["a"]);var te=new H["a"]({mode:"history",routes:[]});a["a"].use(z.a,h.a),a["a"].use(W.a),a["a"].$cookies.config("7d"),a["a"].config.productionTip=!1,new a["a"]({router:te,render:function(e){return e(J)}}).$mount("#app")},5748:function(e,t,n){"use strict";var a=n("c2a9"),s=n.n(a);s.a},"5c0b":function(e,t,n){"use strict";var a=n("9c0c"),s=n.n(a);s.a},7438:function(e,t,n){"use strict";var a=n("cb22"),s=n.n(a);s.a},"8da9":function(e,t,n){},"913e":function(e,t,n){},"96a0":function(e,t,n){"use strict";var a=n("8da9"),s=n.n(a);s.a},"9bbe":function(e,t,n){},"9c0c":function(e,t,n){},c2a9:function(e,t,n){},cb22:function(e,t,n){},f634:function(e,t,n){"use strict";var a=n("9bbe"),s=n.n(a);s.a}});
//# sourceMappingURL=app.9d31fba0.js.map