(function(e){function t(t){for(var s,o,u=t[0],i=t[1],l=t[2],p=0,b=[];p<u.length;p++)o=u[p],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&b.push(n[o][0]),n[o]=0;for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s]);c&&c(t);while(b.length)b.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,u=1;u<a.length;u++){var i=a[u];0!==n[i]&&(s=!1)}s&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var s={},n={app:0},r=[];function o(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=s,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/albums-by-year/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var c=i;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"167f":function(e,t,a){"use strict";var s=a("377c"),n=a.n(s);n.a},"223b":function(e,t,a){"use strict";var s=a("7ebf"),n=a.n(s);n.a},"352a":function(e,t,a){},"377c":function(e,t,a){},"48e9":function(e,t,a){"use strict";var s=a("e300"),n=a.n(s);n.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{app:!0,desktop:e.desktop}},[a("div",{staticClass:"header"},[e._v("Albums By Year")]),a("main",[e.authorised?a("Library",{attrs:{access_token:e.access_token}}):a("div",{staticClass:"login"},[a("h1",{staticClass:"title"},[e._v("Albums By Year")]),a("p",{staticClass:"preface"},[e._v("See your saved albums on spotify, categorised by year!")]),a("a",{staticClass:"auth",attrs:{href:e.authoriseURL,target:"_self"}},[e._v("LOG IN WITH SPOTIFY")])])],1),a("footer",[a("ul",[a("li",[a("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fab","github"]}}),a("a",{attrs:{href:"https://github.com/TheTeaCat/albums-by-year/"}},[e._v("GitHub")])],1),e._m(0)])])])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",[e._v("Made by "),a("a",{attrs:{href:"http://joshuarainbow.co.uk/"}},[e._v("Josh")])])}],o=(a("4160"),a("a15b"),a("d81d"),a("ac1f"),a("5319"),a("1276"),a("159b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"library"},[e.loaded?a("div",[a("h1",{staticClass:"library-header"},[a("a",{staticClass:"username",attrs:{href:e.profile.external_urls.spotify}},[e._v(e._s(e.profile.display_name))]),e._v(e._s("s"==e.profile.display_name[-1]?"'":"'s")+" saved albums, by year"),a("span",[e._v("!")])]),a("ToggleGroup",{attrs:{options:e.album_types,title:"Release Types"}}),a("ol",e._l(e.sortedAlbumYears,(function(t){return a("Year",{key:t,attrs:{year:t,albums:e.albumsByYear[t].albums,album_types:e.album_types,access_token:e.access_token}})})),1),a("h2",{directives:[{name:"show",rawName:"v-show",value:0==e.loadedAlbums.length,expression:"loadedAlbums.length == 0"}]},[e._v("You haven't got any saved albums!")])],1):a("div",{staticClass:"loading"},[a("h1",{staticClass:"loading-title"},[e._v("Loading")]),a("p",{staticClass:"album-count"},[e._v(e._s(e.loadedAlbums)+" albums")])])])}),u=[],i=(a("b64b"),a("b85c")),l=(a("96cf"),a("1da1")),c=a("bc3a"),p=a.n(c),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",e._l(Object.keys(e.options),(function(t){return a("li",{key:t},[a("Toggle",{staticClass:"toggle",attrs:{value:e.options[t].show},on:{change:function(a){e.options[t].show=!e.options[t].show}}}),e._v(" "+e._s(e.options[t].display)+" ")],1)})),0)},m=[],d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"switch"},[a("input",{attrs:{type:"checkbox"},domProps:{checked:e.value},on:{click:function(t){return e.$emit("change")}}}),a("span",{staticClass:"slider"})])},f=[],h={props:["value"]},_=h,v=(a("6d85"),a("2877")),y=Object(v["a"])(_,d,f,!1,null,"20243cab",null),g=y.exports,w={components:{Toggle:g},props:["title","options"]},k=w,x=(a("c216"),Object(v["a"])(k,b,m,!1,null,"62d29caf",null)),C=x.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{directives:[{name:"show",rawName:"v-show",value:e.visibleAlbums>0,expression:"visibleAlbums > 0"}],staticClass:"year"},[a("hr"),a("h2",{staticClass:"year-header"},[a("font-awesome-icon",{class:{icon:!0,expanded:e.expanded},attrs:{icon:e.expanded?"minus":"plus"},on:{click:function(t){e.expanded=!e.expanded}}}),e._v(" "+e._s(e.year)+" "),a("span",[e._v("("+e._s(e.visibleAlbums)+")")])],1),a("ol",{directives:[{name:"show",rawName:"v-show",value:e.expanded,expression:"expanded"}],staticClass:"albums-list"},e._l(e.sortedAlbums,(function(t){return a("Album",{directives:[{name:"show",rawName:"v-show",value:e.album_types[t.album.album_type].show,expression:"album_types[album.album.album_type].show"}],key:t.album.id,attrs:{album:t}})})),1)])},j=[],A=(a("4de4"),a("fb6a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{staticClass:"album"},[e.albumCover?a("img",{attrs:{src:e.albumCover}}):e._e(),a("div",{staticClass:"album-title"},[a("a",{attrs:{href:e.album.album.external_urls.spotify}},[e._v(e._s(e.album.album.name))])]),a("ul",{staticClass:"artists-list"},e._l(e.album.album.artists,(function(t){return a("li",{key:t.id},[a("a",{attrs:{href:t.external_urls.spotify}},[e._v(e._s(t.name))])])})),0),a("div",{staticClass:"album-release-date"},[e._v(e._s(e.album.album.release_date.replace(/-/g,"/")))])])}),Y=[],T={props:["access_token","album"],data:function(){return{albumCover:null}},mounted:function(){this.album.album.images.sort((function(e,t){return t.width*t.height-e.width*e.height}))[0],this.albumCover=this.album.album.images[0].url}},$=T,P=(a("223b"),Object(v["a"])($,A,Y,!1,null,"0b3ebbe2",null)),R=P.exports,E={components:{Album:R},props:["access_token","year","albums","album_types"],data:function(){return{expanded:!1}},computed:{sortedAlbums:function(){return this.albums.slice().sort((function(e,t){var a=e.album.release_date,s=t.album.release_date;return a>s?-1:a<s?1:0}))},visibleAlbums:function(){var e=this;return this.albums.filter((function(t){return e.album_types[t.album.album_type].show})).length}}},S=E,B=(a("48e9"),Object(v["a"])(S,O,j,!1,null,"649a3629",null)),L=B.exports,M={components:{ToggleGroup:C,Year:L},props:["access_token"],data:function(){return{albumsByYear:null,profile:null,album_types:{album:{show:!0,display:"Albums"},single:{show:!1,display:"Singles"},compilation:{show:!1,display:"Compilations"}},loadedAlbums:0}},computed:{albums_request_url:function(){return"https://api.spotify.com/v1/me/albums?access_token="+this.access_token+"&limit=50&offset=0"},profile_request_url:function(){return"https://api.spotify.com/v1/me/?access_token="+this.access_token},sortedAlbumYears:function(){return Object.keys(this.albumsByYear).sort((function(e,t){return t-e}))},loaded:function(){return this.albumsByYear&&this.profile}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(t).then(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var n,r,o,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.loadedAlbums+=t.data.items.length,!t.data.next){e.next=4;break}return e.next=4,a(t.data.next+"&access_token="+this.access_token,s);case 4:t=t.data.items,n=Object(i["a"])(t);try{for(n.s();!(r=n.n()).done;)o=r.value,u=o["album"]["release_date"].split("-")[0],!s[u]&&(s[u]={year:u,albums:[]}),s[u]["albums"].push(o)}catch(l){n.e(l)}finally{n.f()}case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}().bind(this));case 2:return e.abrupt("return",s);case 3:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}().bind(e),t.next=3,a(e.albums_request_url,{});case 3:e.albumsByYear=t.sent,p.a.get(e.profile_request_url).then(function(e){this.profile=e.data}.bind(e));case 5:case"end":return t.stop()}}),t)})))()}},N=M,q=(a("167f"),Object(v["a"])(N,o,u,!1,null,"4587aad2",null)),G=q.exports,I={components:{Library:G},data:function(){return{scopes:["user-library-read"],client_id:"8c00d93547824017b1854018ed35bdef",access_token:null}},computed:{authorised:function(){return!!this.access_token},authoriseURL:function(){return"https://accounts.spotify.com/authorize?client_id="+this.client_id+"&response_type=token&redirect_uri="+location.protocol+"//"+location.host+location.pathname+"&scope="+this.scopes.join("%20")},desktop:function(){return!/Mobi/i.test(window.navigator.userAgent)}},mounted:function(){var e={};this.$route.hash.split("&").map((function(e){return e.replace("#","")})).forEach((function(t){var a=t.split("=");e[a[0]]=a[1]})),this.access_token=e["access_token"],this.authorised&&this.$router.push(this.$route.path)}},J=I,H=(a("5c0b"),Object(v["a"])(J,n,r,!1,null,null,null)),U=H.exports,z=a("8c4f"),F=a("a7fe"),W=a.n(F),D=a("ecee"),K=a("ad3d"),Q=a("f2d1"),V=a("c074");D["c"].add(Q["a"]),D["c"].add(V["b"],V["a"]),s["a"].component("font-awesome-icon",K["a"]),s["a"].use(z["a"]);var X=new z["a"]({mode:"history",routes:[]});s["a"].use(W.a,p.a),s["a"].config.productionTip=!1,new s["a"]({router:X,render:function(e){return e(U)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var s=a("9c0c"),n=a.n(s);n.a},"6d85":function(e,t,a){"use strict";var s=a("352a"),n=a.n(s);n.a},"70bb":function(e,t,a){},"7ebf":function(e,t,a){},"9c0c":function(e,t,a){},c216:function(e,t,a){"use strict";var s=a("70bb"),n=a.n(s);n.a},e300:function(e,t,a){}});
//# sourceMappingURL=app.521a81f2.js.map